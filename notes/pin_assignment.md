# ECM -> Arduino Pin Assingments

| ECM Pin | Function                               | Schematic Alias | Arduino Pin | ATTiny Pin | Notes                                                                                                                                                                                                                     |
|---------|----------------------------------------|-----------------|-------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1       | Switched 12V Power                     | +12V            |             |            | Input to onboard PSU                                                                                                                                                                                                      |
| 2       | Vehicle Down Sensor                    | VDOWN           |             | A2         |                                                                                                                                                                                                                           |
| 3       | Crankshaft Position +                  | CKP+            | D19         |            | Sensor connected to amp/conditioner, conditioner output<br>connected to D19                                                                                                                                                                                                                          |
| 4       | Unconnected                            |                 |             |            |                                                                                                                                                                                                                           |
| 5       | Throttle Position Sensor               | TPS             | A2          |            |                                                                                                                                                                                                                           |
| 6       | Intake air pressure sensor             | MAP             | A3          |            |                                                                                                                                                                                                                           |
| 7       | Oxygen Sensor                          | O2S             | A8          |            |                                                                                                                                                                                                                           |
| 8       | Control Ground                         | GND             |             |            | Connected to ECM internal ground                                                                                                                                                                                          |
| 9       | Crankshaft Position -                  | CKP-            | D19         |            |                                                                                                                                                                                                                           |
| 10      | External Communication                 |                 |             |            | On the original bike, this is the OEM diagnostic port.<br>It's not useful for speeduino, so it will be left unconnected                                                                                                   |
| 11      | Fuel pump relay                        | FP-RELAY        | D45         |            |                                                                                                                                                                                                                           |
| 12      | Starter Lockout Switch / Clutch Switch | CLUTCH-SW       | D51         |            | Recommended to use for speeduino's launch control input                                                                                                                                                                   |
| 13      | Sensor power supply                    | +5V             |             |            | 5 Volts output from ECM's internal power supply                                                                                                                                                                           |
| 14      | Subthrottle valve actuator B           | SUB-B+          |             | A5,A6      | B Coil positive lead for subthrottle stepper, connected to the DRV8825                                                                                                                                                                              |
| 15      | Subthrottle valve actuator A           | SUB-A+          |             | A5,A6      | A Coil positive lead for subthrottle stepper, connected to the DRV8825                                                                                                                                                                              |
| 16      | Fuel injector                          | INJ             | D8          |            |                                                                                                                                                                                                                           |
| 17      | Oxygen sensor heater                   | O2S-HEAT        | D45         |            | Microsquirt docs recommend tying this to the fuel pump.<br>Speeduino doesn't have support for O2 sensor heater control.                                                                                                   |
| 18      | Ignition Coil                          | IGN             | D40         |            | This is normally a CDI pulse output, for v1 of the board it<br>may be a logic level output for a smart coil                                                                                                               |
| 19      | Power supply from battery              | +BATT           |             |            | Always-on power directly from the vehicle's battery                                                                                                                                                                       |
| 20      | Neutral Switch                         | NEUTRAL         |             | A3         | Used by the attiny to halt the main processor if we're in gear<br>and the kickstand is down                                                                                                                               |
| 21      | Check engine light                     | MIL             | D32         | D10        | Speeduino supports programmable outputs, so we could flash the<br>lamp when engine protection is triggered or something. The speeduino will tell the<br>ATTiny something is wrong, then the ATTiny will activate the lamp. The ATTiny can also activate the lamp if the safety switch is triggered.                                                                                                  |
| 22      | Water temperature sensor               | CLT             | A1          |            |                                                                                                                                                                                                                           |
| 23      | Self diagnosis terminal                | SELF-DIAG       | D53?        |            | Will be tied to a generic digital input                                                                                                                                                                                   |
| 24      | Sensor Ground                          | GND             |             |            | Ground for pressure sensors, etc.                                                                                                                                                                                         |
| 25      | Intake air temperature sensor          | IAT             | A0          |            |                                                                                                                                                                                                                           |
| 26      | Speed Sensor                           | VSS             | D20         |            | Speeduino supports gear detection, maybe we can do something<br>useful with that information                                                                                                                              |
| 27      | Subthrottle sensor                     | SUB-TPS         |             | A1         | Used so the ATTiny can tell when the secondary throttle valves<br>are fully open                                                                                                                                          |
| 28      | Coolant temperature warning light      | TEMP-WARN       | tbd         |            | Controlled by the speeduino's programmable outputs, can trigger<br>at a customizable temperature                                                                                                                          |
| 29      | Side stand switch                      | SIDE-SW         |             | A4         | Used by the attiny to halt the main processor if we're in gear and<br>the kickstand is down                                                                                                                               |
| 30      | Air switching valve                    | n/a             |             |            | Injects air into the exhaust stream, will not be supported in v1                                                                                                                                                          |
| 31      | Subthrottle valve actuator A           | SUB-A-          |             | A5,A6      | A coil negative lead for the subthrottle stepper, connected to the DRV8825                                                                                                                                                                        |
| 32      | Subthrottle valve actuator B           | SUB-B-          |             | A5,A6      | B coil negative lead for the subthrottle stepper, connected to the DRV8825                                                                                                                                                                          |
| 33      | Radiator Fan relay                     | FAN-RELAY       | D47         |            |                                                                                                                                                                                                                           |
| 34      | Engine stop switch                     | KILL-SW         |             |            | This switch already provides power to the fuel injectors and fuel pump,<br>it's probably fine to leave this unconnected. or connect to the ATTiny so<br>it can shut the secondary throttles if the killswitch is enabled? |
| 35      | Ground for ECM                         | GND             |             |            |                                                                                                                                                                                                                           |
| 36      | Ground for ECM                         | GND             |             |            |          

# Auxiliary Pins
| Board Pin | Function                               | Schematic Alias | Arduino Pin | ATTiny Pin | Notes                                                                                                                                                                                                                     |
|-----------|----------------------------------------|-----------------|-------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| J?1       | Camshaft Position Sensor +             | CAM+            | D18         |            | Auxiliary camshaft position sensor input, if you want to run sequential ignition... the VR conditioner has 2 channels so why not?                                                                                         |
| J?2       | Camshaft Position Sensor -             | CAM-            | D18         |            | Auxiliary camshaft position sensor input, if you want to run sequential ignition... the VR conditioner has 2 channels so why not?                                                                                         |
| J?        | Tacho output                           | TACH            | D49         |            | Tach output if needed, pads can be left blank 